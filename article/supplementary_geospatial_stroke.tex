
\documentclass[utf8]{frontiers_suppmat} % for all articles
\usepackage{url,hyperref,lineno,microtype}
\usepackage[onehalfspacing]{setspace}



% Leave a blank line between paragraphs instead of using \\

\begin{document}
\onecolumn
\firstpage{1}

\title[Supplementary Material]{{\helveticaitalic{Supplementary Material}}}


\maketitle


\section{Supplementary Material}

Supplementary material relating to this article is provided in the
form of R and python source code that can be used to re-create the
examples discussed in the text, as well as interactive versions of the
outputs of those examples. The material is available in two forms - a
zip file in the Frontiers supplementary material section and a
\href{https://richardbeare.github.io/Geospatial/index.html}{``live''
  version}.

\section{Introduction to examples}

The article discusses two examples: 
\begin{itemize}
\item Construction of a choropleth or thematic map.
\item Estimation of catchment basins and case loadings for rehabilitation centres.
\end{itemize}

The supplementary material includes several implementations of these examples, as follows:

\begin{itemize}
\item {\em R} implementations of both that do not require installation of API keys: \href{https://richardbeare.github.io/GeospatialStroke/Choropleth/mmc_surrounds.html}{Choropleth}, \href{https://richardbeare.github.io/GeospatialStroke/RehabCatchment/README.html}{Catchment basins}.
\item {\em Python} implementations of both that do not require installation of API keys. \href{https://richardbeare.github.io/GeospatialStroke/python/notebooks/example1.html}{Choropleth}, \href{https://richardbeare.github.io/GeospatialStroke/python/notebooks/example2.html}{Catchment basins}.
\item An alternative {\em R} implementation of the second example that utilises API keys to access Google services and Mapbox visualization services: \href{https://richardbeare.github.io/GeospatialStroke/RehabCatchmentAdvances/Googleway_Mapdeck.html}{Catchment basins with API keys}.
\end{itemize}

The live versions of the examples requiring API keys do not include interactive visualizations. Examples must be
recreated by the user, with their own keys, in order to use the visualization tools.

\section{Software setup}
\subsection{{\em R} setup}

The R statistical environment can be obtained for Windows, Macintosh
and Linux from
\href{http://cran.r-project.org/mirrors.html}{www.r-project.org}.

{\em Rstudio}, a modern graphical development environment for {\em R},
is also recommended and may be obtained from
\href{https://www.rstudio.com/products/rstudio/download/}{www.rstudio.com}. The
following instructions assume an installation of {\em Rstudio}.

The examples employ a number of {\em packages} to provide required
functionality. These may be installed from inside {\em R} or {\em
  Rstudio} by issuing the following commands:

\begin{verbatim}
install.packages(c("tidyverse", "sf", "here", "units", "tmaptools", 
                   "tmap", "knitr", "mapdeck", "googleway",
                   "mapview", "devtools", "dodgr", "viridisLite"))

devtools::install_github("HughParsonage/PSMA")
\end{verbatim}

The interactive examples can then be created locally by opening the
{\em R markdown} files, that have a {\em .Rmd} suffix, and click on
the {\em knit} button in {\em Rstudio}.

\subsection{{\em Python} setup}

The \href{https://docs.conda.io/en/latest/miniconda.html}{miniconda}
tools are recommended for management of python installations. The
commands below should be executed in the terminal (Mac/Linux) or the
command prompt (Windows). The steps are:

\begin{enumerate}
\item  Install \href{https://docs.conda.io/en/latest/miniconda.html}{miniconda}
\item  Create virtual environment: 
\begin{verbatim}
conda create --name GEO -c conda-forge python=3 --file requirements.txt
\end{verbatim}

This command needs to be executed from within the python folder containing the {\em requirements.txt} file.

\item Activate virtual environment: 
on Mac/Linux
\begin{verbatim}
source activate GEO  
\end{verbatim}
or, on Windows
\begin{verbatim}
activate GEO 
\end{verbatim}
\item Change directories in the terminal or command prompt to the location of the
notebook folder and launch Jupyter to run the notebooks:
\begin{verbatim}
jupyter lab
\end{verbatim}
\end{enumerate}

A {\em Jupyter notebook} server will run in your browser - select
either {\em example1.pynb} or {\em example2.pynb}
to open the examples.


\subsection{API Keys and tokens}\label{api-keys}

Online services which offer an interface to their applications will
sometimes require use of an API key, or application programming
interface key. This key should be unique for each user, developer or
application making use of the service as it is a way for the provider to
monitor and, where applicable, charge for use.

Two major mapping platforms that require an API key are Google Maps
and Mapbox, both of which are used in the second version of the
catchment basin example. At the time of writing both allow
unrestricted use of the mapping API. However, Google has limits on the
other services it offers such as geocoding and direction services.

Both Google and Mapbox require users create an account.

The required Google API keys may be obtained by following instructions
\href{https://developers.google.com/maps/documentation/embed/get-api-key}{provided
  by Google}.

The required Mapbox token may be obtained by following instructions
\href{https://www.mapbox.com/account/access-tokens}{provided by
  Mapbox}.
\end{document}
